{"version":3,"names":["HeaderSegment","props","leftLabelLayout","setLeftLabelLayout","React","useState","undefined","titleLayout","setTitleLayout","handleTitleLayout","e","height","width","nativeEvent","layout","handleLeftLabelLayout","getInterpolatedStyle","memoize","styleInterpolator","current","next","headerHeight","progress","layouts","header","screen","title","leftLabel","modal","onGoBack","headerTitle","headerLeft","left","headerRight","right","headerBackImage","headerBackTitle","headerBackTitleVisible","Platform","OS","headerTruncatedBackTitle","headerBackAccessibilityLabel","headerBackTestID","headerBackAllowFontScaling","headerBackTitleStyle","headerTitleContainerStyle","headerLeftContainerStyle","headerRightContainerStyle","headerBackgroundContainerStyle","headerStyle","customHeaderStyle","headerStatusBarHeight","rest","defaultHeight","getDefaultHeaderHeight","StyleSheet","flatten","titleStyle","leftButtonStyle","leftLabelStyle","rightButtonStyle","backgroundStyle","backImage","accessibilityLabel","testID","allowFontScaling","onPress","label","truncatedLabel","labelStyle","onLabelLayout","screenLayout","canGoBack","Boolean","onLayout"],"sources":["HeaderSegment.tsx"],"sourcesContent":["import {\n  getDefaultHeaderHeight,\n  Header,\n  HeaderBackButton,\n  HeaderBackButtonProps,\n  HeaderTitle,\n} from '@react-navigation/elements';\nimport * as React from 'react';\nimport {\n  Animated,\n  LayoutChangeEvent,\n  Platform,\n  StyleSheet,\n  ViewStyle,\n} from 'react-native';\n\nimport type {\n  Layout,\n  SceneProgress,\n  StackHeaderOptions,\n  StackHeaderStyleInterpolator,\n} from '../../types';\nimport memoize from '../../utils/memoize';\n\ntype Props = Omit<StackHeaderOptions, 'headerStatusBarHeight'> & {\n  headerStatusBarHeight: number;\n  layout: Layout;\n  title: string;\n  modal: boolean;\n  onGoBack?: () => void;\n  progress: SceneProgress;\n  styleInterpolator: StackHeaderStyleInterpolator;\n};\n\nexport default function HeaderSegment(props: Props) {\n  const [leftLabelLayout, setLeftLabelLayout] = React.useState<\n    Layout | undefined\n  >(undefined);\n\n  const [titleLayout, setTitleLayout] = React.useState<Layout | undefined>(\n    undefined\n  );\n\n  const handleTitleLayout = (e: LayoutChangeEvent) => {\n    const { height, width } = e.nativeEvent.layout;\n\n    setTitleLayout((titleLayout) => {\n      if (\n        titleLayout &&\n        height === titleLayout.height &&\n        width === titleLayout.width\n      ) {\n        return titleLayout;\n      }\n\n      return { height, width };\n    });\n  };\n\n  const handleLeftLabelLayout = (e: LayoutChangeEvent) => {\n    const { height, width } = e.nativeEvent.layout;\n\n    if (\n      leftLabelLayout &&\n      height === leftLabelLayout.height &&\n      width === leftLabelLayout.width\n    ) {\n      return;\n    }\n\n    setLeftLabelLayout({ height, width });\n  };\n\n  const getInterpolatedStyle = memoize(\n    (\n      styleInterpolator: StackHeaderStyleInterpolator,\n      layout: Layout,\n      current: Animated.AnimatedInterpolation,\n      next: Animated.AnimatedInterpolation | undefined,\n      titleLayout: Layout | undefined,\n      leftLabelLayout: Layout | undefined,\n      headerHeight: number\n    ) =>\n      styleInterpolator({\n        current: { progress: current },\n        next: next && { progress: next },\n        layouts: {\n          header: {\n            height: headerHeight,\n            width: layout.width,\n          },\n          screen: layout,\n          title: titleLayout,\n          leftLabel: leftLabelLayout,\n        },\n      })\n  );\n\n  const {\n    progress,\n    layout,\n    modal,\n    onGoBack,\n    headerTitle: title,\n    headerLeft: left = onGoBack\n      ? (props: HeaderBackButtonProps) => <HeaderBackButton {...props} />\n      : undefined,\n    headerRight: right,\n    headerBackImage,\n    headerBackTitle,\n    headerBackTitleVisible = Platform.OS === 'ios',\n    headerTruncatedBackTitle,\n    headerBackAccessibilityLabel,\n    headerBackTestID,\n    headerBackAllowFontScaling,\n    headerBackTitleStyle,\n    headerTitleContainerStyle,\n    headerLeftContainerStyle,\n    headerRightContainerStyle,\n    headerBackgroundContainerStyle,\n    headerStyle: customHeaderStyle,\n    headerStatusBarHeight,\n    styleInterpolator,\n    ...rest\n  } = props;\n\n  const defaultHeight = getDefaultHeaderHeight(\n    layout,\n    modal,\n    headerStatusBarHeight\n  );\n\n  const { height = defaultHeight } = StyleSheet.flatten(\n    customHeaderStyle || {}\n  ) as ViewStyle;\n\n  const {\n    titleStyle,\n    leftButtonStyle,\n    leftLabelStyle,\n    rightButtonStyle,\n    backgroundStyle,\n  } = getInterpolatedStyle(\n    styleInterpolator,\n    layout,\n    progress.current,\n    progress.next,\n    titleLayout,\n    headerBackTitle ? leftLabelLayout : undefined,\n    typeof height === 'number' ? height : defaultHeight\n  );\n\n  const headerLeft: StackHeaderOptions['headerLeft'] = left\n    ? (props) =>\n        left({\n          ...props,\n          backImage: headerBackImage,\n          accessibilityLabel: headerBackAccessibilityLabel,\n          testID: headerBackTestID,\n          allowFontScaling: headerBackAllowFontScaling,\n          onPress: onGoBack,\n          label: headerBackTitle,\n          truncatedLabel: headerTruncatedBackTitle,\n          labelStyle: [leftLabelStyle, headerBackTitleStyle],\n          onLabelLayout: handleLeftLabelLayout,\n          screenLayout: layout,\n          titleLayout,\n          canGoBack: Boolean(onGoBack),\n        })\n    : undefined;\n\n  const headerRight: StackHeaderOptions['headerRight'] = right\n    ? (props) =>\n        right({\n          ...props,\n          canGoBack: Boolean(onGoBack),\n        })\n    : undefined;\n\n  const headerTitle: StackHeaderOptions['headerTitle'] =\n    typeof title !== 'function'\n      ? (props) => <HeaderTitle {...props} onLayout={handleTitleLayout} />\n      : (props) => title({ ...props, onLayout: handleTitleLayout });\n\n  return (\n    <Header\n      modal={modal}\n      layout={layout}\n      headerTitle={headerTitle}\n      headerLeft={headerLeft}\n      headerLeftLabelVisible={headerBackTitleVisible}\n      headerRight={headerRight}\n      headerTitleContainerStyle={[titleStyle, headerTitleContainerStyle]}\n      headerLeftContainerStyle={[leftButtonStyle, headerLeftContainerStyle]}\n      headerRightContainerStyle={[rightButtonStyle, headerRightContainerStyle]}\n      headerBackgroundContainerStyle={[\n        backgroundStyle,\n        headerBackgroundContainerStyle,\n      ]}\n      headerStyle={customHeaderStyle}\n      headerStatusBarHeight={headerStatusBarHeight}\n      {...rest}\n    />\n  );\n}\n"],"mappings":"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"}