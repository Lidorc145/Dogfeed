{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from 'react';\nimport { Box, FlatList, Spinner, Text } from 'native-base';\nimport { useGetUsersQuery } from \"../services/user-api\";\nimport { UserCard } from \"../components/user-card\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport var ExploreScreen = function ExploreScreen() {\n  var _data$;\n  var _useState = useState(undefined),\n    _useState2 = _slicedToArray(_useState, 2),\n    begID = _useState2[0],\n    setBegID = _useState2[1];\n  var _useGetUsersQuery = useGetUsersQuery(begID),\n    _useGetUsersQuery$dat = _useGetUsersQuery.data,\n    data = _useGetUsersQuery$dat === void 0 ? [] : _useGetUsersQuery$dat,\n    isFetching = _useGetUsersQuery.isFetching,\n    refetch = _useGetUsersQuery.refetch;\n  var _useState3 = useState(data),\n    _useState4 = _slicedToArray(_useState3, 2),\n    users = _useState4[0],\n    setUsers = _useState4[1];\n  useEffect(function () {\n    if (begID) {\n      setUsers(users.concat(data));\n    } else {\n      setUsers(data);\n    }\n  }, [(_data$ = data[0]) == null ? void 0 : _data$.id]);\n  return _jsx(Box, {\n    w: \"100%\",\n    h: \"100%\",\n    bgColor: \"background.100\",\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    children: _jsx(FlatList, {\n      w: \"100%\",\n      h: \"100%\",\n      refreshing: isFetching,\n      onRefresh: function onRefresh() {\n        return begID ? setBegID(undefined) : refetch();\n      },\n      renderItem: function renderItem(_ref) {\n        var item = _ref.item,\n          index = _ref.index;\n        return _jsx(UserCard, {\n          firstName: item.firstName,\n          lastName: item.lastName,\n          count: item.count,\n          image: item.image || undefined\n        }, item.id + \"-\" + index);\n      },\n      data: users,\n      onEndReached: function onEndReached() {\n        return setBegID(users.length ? users[users.length - 1].id : begID);\n      },\n      onEndReachedThreshold: 0.2,\n      ListFooterComponent: data.length ? _jsx(Spinner, {\n        color: \"background.400\",\n        animating: isFetching && Boolean(users.length)\n      }) : _jsx(Text, {\n        pt: 3,\n        pb: 8,\n        color: \"plainText.600\",\n        fontStyle: \"italic\",\n        alignSelf: \"center\",\n        children: \"No more players\"\n      })\n    })\n  });\n};","map":{"version":3,"names":["React","useEffect","useState","Box","FlatList","Spinner","Text","useGetUsersQuery","UserCard","ExploreScreen","undefined","begID","setBegID","data","isFetching","refetch","users","setUsers","concat","id","item","index","firstName","lastName","count","image","length","Boolean"],"sources":["C:/Users/LidorCohen/Desktop/Dogfeel/src/screens/explore.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport {Box, Button, FlatList, Spinner, Text} from 'native-base';\nimport { useGetUsersQuery } from 'src/services/user-api';\nimport { PublicUserData } from 'src/types';\nimport { UserCard } from 'src/components/user-card';\n\n/**\n * Explore screen - where the user will be able to view other users.\n *\n * @return {*}\n */\nexport const ExploreScreen: React.FC<{}> = () => {\n    // state and query hooks\n    const [begID, setBegID] = useState<string | undefined>(undefined);\n    const { data = [], isFetching, refetch } = useGetUsersQuery(begID);\n    const [users, setUsers] = useState<Array<PublicUserData>>(data);\n\n    useEffect(() => {\n        // concat if there are more users, otherwise set equal to data\n        if (begID) {\n            setUsers(users.concat(data));\n        } else {\n            setUsers(data);\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [data[0]?.id]);\n\n    return (\n        <Box\n            w=\"100%\"\n            h=\"100%\"\n            bgColor=\"background.100\"\n            flex={1}\n            alignItems=\"center\"\n            justifyContent=\"center\">\n            <FlatList\n                w=\"100%\"\n                h=\"100%\"\n                refreshing={isFetching}\n                onRefresh={() => (begID ? setBegID(undefined) : refetch())}\n                renderItem={({ item, index }) => (\n                    <UserCard\n                        key={`${item.id}-${index}`}\n                        firstName={item.firstName}\n                        lastName={item.lastName}\n                        count={item.count}\n                        image={item.image || undefined}\n                    />\n                )}\n                data={users}\n                onEndReached={() => setBegID(users.length ? users[users.length - 1].id : begID)}\n                onEndReachedThreshold={0.2}\n                ListFooterComponent={\n                    data.length ? (\n                        <Spinner\n                            color=\"background.400\"\n                            animating={isFetching && Boolean(users.length)}\n                        />\n                    ) : (\n                        <Text\n                            pt={3}\n                            pb={8}\n                            color=\"plainText.600\"\n                            fontStyle=\"italic\"\n                            alignSelf=\"center\">\n                            No more players\n                        </Text>\n                    )\n                }\n            />\n        </Box>\n    );\n};\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAAQC,GAAG,EAAUC,QAAQ,EAAEC,OAAO,EAAEC,IAAI,QAAO,aAAa;AAChE,SAASC,gBAAgB;AAEzB,SAASC,QAAQ;AAAmC;AAOpD,OAAO,IAAMC,aAA2B,GAAG,SAA9BA,aAA2B,GAAS;EAAA;EAE7C,gBAA0BP,QAAQ,CAAqBQ,SAAS,CAAC;IAAA;IAA1DC,KAAK;IAAEC,QAAQ;EACtB,wBAA2CL,gBAAgB,CAACI,KAAK,CAAC;IAAA,0CAA1DE,IAAI;IAAJA,IAAI,sCAAG,EAAE;IAAEC,UAAU,qBAAVA,UAAU;IAAEC,OAAO,qBAAPA,OAAO;EACtC,iBAA0Bb,QAAQ,CAAwBW,IAAI,CAAC;IAAA;IAAxDG,KAAK;IAAEC,QAAQ;EAEtBhB,SAAS,CAAC,YAAM;IAEZ,IAAIU,KAAK,EAAE;MACPM,QAAQ,CAACD,KAAK,CAACE,MAAM,CAACL,IAAI,CAAC,CAAC;IAChC,CAAC,MAAM;MACHI,QAAQ,CAACJ,IAAI,CAAC;IAClB;EAEJ,CAAC,EAAE,WAACA,IAAI,CAAC,CAAC,CAAC,qBAAP,OAASM,EAAE,CAAC,CAAC;EAEjB,OACI,KAAC,GAAG;IACA,CAAC,EAAC,MAAM;IACR,CAAC,EAAC,MAAM;IACR,OAAO,EAAC,gBAAgB;IACxB,IAAI,EAAE,CAAE;IACR,UAAU,EAAC,QAAQ;IACnB,cAAc,EAAC,QAAQ;IAAA,UACvB,KAAC,QAAQ;MACL,CAAC,EAAC,MAAM;MACR,CAAC,EAAC,MAAM;MACR,UAAU,EAAEL,UAAW;MACvB,SAAS,EAAE;QAAA,OAAOH,KAAK,GAAGC,QAAQ,CAACF,SAAS,CAAC,GAAGK,OAAO,EAAE;MAAA,CAAE;MAC3D,UAAU,EAAE;QAAA,IAAGK,IAAI,QAAJA,IAAI;UAAEC,KAAK,QAALA,KAAK;QAAA,OACtB,KAAC,QAAQ;UAEL,SAAS,EAAED,IAAI,CAACE,SAAU;UAC1B,QAAQ,EAAEF,IAAI,CAACG,QAAS;UACxB,KAAK,EAAEH,IAAI,CAACI,KAAM;UAClB,KAAK,EAAEJ,IAAI,CAACK,KAAK,IAAIf;QAAU,GAJvBU,IAAI,CAACD,EAAE,SAAIE,KAAK,CAK1B;MAAA,CACJ;MACF,IAAI,EAAEL,KAAM;MACZ,YAAY,EAAE;QAAA,OAAMJ,QAAQ,CAACI,KAAK,CAACU,MAAM,GAAGV,KAAK,CAACA,KAAK,CAACU,MAAM,GAAG,CAAC,CAAC,CAACP,EAAE,GAAGR,KAAK,CAAC;MAAA,CAAC;MAChF,qBAAqB,EAAE,GAAI;MAC3B,mBAAmB,EACfE,IAAI,CAACa,MAAM,GACP,KAAC,OAAO;QACJ,KAAK,EAAC,gBAAgB;QACtB,SAAS,EAAEZ,UAAU,IAAIa,OAAO,CAACX,KAAK,CAACU,MAAM;MAAE,EACjD,GAEF,KAAC,IAAI;QACD,EAAE,EAAE,CAAE;QACN,EAAE,EAAE,CAAE;QACN,KAAK,EAAC,eAAe;QACrB,SAAS,EAAC,QAAQ;QAClB,SAAS,EAAC,QAAQ;QAAA;MAAA;IAI7B;EACH,EACA;AAEd,CAAC"},"metadata":{},"sourceType":"module"}