{"ast":null,"code":"import { initializeApp } from 'firebase/app';\nimport { initializeAuth, browserPopupRedirectResolver } from 'firebase/auth';\nimport { getReactNativePersistence } from 'firebase/auth/react-native';\nimport { collection, getFirestore } from 'firebase/firestore';\nimport { getStorage } from 'firebase/storage';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nvar firebaseConfig = {\n  apiKey: \"AIzaSyAPuxW1Qk-MLLi_DG-PPOXo3n57_7pCXSU\",\n  authDomain: \"\\\"dogfeel-5238f.firebaseapp.com\",\n  projectId: \"dogfeel-5238f\",\n  storageBucket: \"dogfeel-5238f.appspot.com\",\n  messagingSenderId: \"290343474599\",\n  appId: \"1:290343474599:web:88c17e085882d612a8d282\",\n  measurementId: \"G-L5V82JNXB4\"\n};\nexport var app = initializeApp(firebaseConfig, {\n  experimentalAutoDetectLongPolling: true\n});\nexport var auth = initializeAuth(app, {\n  persistence: [getReactNativePersistence(AsyncStorage)],\n  popupRedirectResolver: browserPopupRedirectResolver\n});\nexport var db = getFirestore(app);\nexport var storage = getStorage();\nvar genericConverter = function genericConverter() {\n  return {\n    toFirestore: function toFirestore(inputData) {\n      return inputData;\n    },\n    fromFirestore: function fromFirestore(snapshot) {\n      return snapshot.data();\n    }\n  };\n};\nvar createCollection = function createCollection(collectionName) {\n  var converter = genericConverter();\n  return collection(db, collectionName).withConverter(converter);\n};\nexport var privateUserCollection = createCollection('private-user-data');\nexport var publicUserCollection = createCollection('public-user-data');","map":{"version":3,"names":["initializeApp","initializeAuth","browserPopupRedirectResolver","getReactNativePersistence","collection","getFirestore","getStorage","AsyncStorage","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","app","experimentalAutoDetectLongPolling","auth","persistence","popupRedirectResolver","db","storage","genericConverter","toFirestore","inputData","fromFirestore","snapshot","data","createCollection","collectionName","converter","withConverter","privateUserCollection","publicUserCollection"],"sources":["C:/Users/LidorCohen/Desktop/Dogfeel/src/firebase/config.ts"],"sourcesContent":["import { initializeApp } from 'firebase/app';\r\nimport { initializeAuth, browserPopupRedirectResolver } from 'firebase/auth';\r\nimport { getReactNativePersistence } from 'firebase/auth/react-native';\r\nimport {\r\n    collection,\r\n    CollectionReference,\r\n    DocumentData,\r\n    FirestoreDataConverter,\r\n    getFirestore,\r\n    QueryDocumentSnapshot,\r\n} from 'firebase/firestore';\r\nimport { getStorage } from 'firebase/storage';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport { PrivateUserData, PublicUserData } from 'src/types';\r\nimport {\r\n    FIREBASE_API_KEY,\r\n    FIREBASE_AUTH_DOMAIN,\r\n    FIREBASE_PROJECT_ID,\r\n    FIREBASE_STORAGE_BUCKET,\r\n    FIREBASE_MESSAGING_SENDER_ID,\r\n    FIREBASE_APP_ID,\r\n    FIREBASE_MEASUREMENT_ID,\r\n} from '@env';\r\n\r\n// setup firebase config\r\nconst firebaseConfig = {\r\n    apiKey: FIREBASE_API_KEY,\r\n    authDomain: FIREBASE_AUTH_DOMAIN,\r\n    projectId: FIREBASE_PROJECT_ID,\r\n    storageBucket: FIREBASE_STORAGE_BUCKET,\r\n    messagingSenderId: FIREBASE_MESSAGING_SENDER_ID,\r\n    appId: FIREBASE_APP_ID,\r\n    measurementId: FIREBASE_MEASUREMENT_ID,\r\n};\r\n\r\n// Initialize Firebase\r\nexport const app = initializeApp(firebaseConfig, { experimentalAutoDetectLongPolling: true });\r\n\r\n/**\r\n * to get rid of async storage incompatibility with expo, initialize auth with the following method\r\n * @link https://github.com/firebase/firebase-js-sdk/issues/1847#issuecomment-915634151\r\n */\r\nexport const auth = initializeAuth(app, {\r\n    persistence: [getReactNativePersistence(AsyncStorage)],\r\n    popupRedirectResolver: browserPopupRedirectResolver,\r\n});\r\n\r\n/**\r\n * Initialize firestore and define typed helping collection function\r\n * @references\r\n * https://plainenglish.io/blog/using-firestore-with-typescript-in-the-v9-sdk-cf36851bb099\r\n * https://medium.com/swlh/using-firestore-with-typescript-65bd2a602945\r\n */\r\nexport const db = getFirestore(app);\r\n\r\n/**\r\n * @Test\r\n */\r\nexport const storage = getStorage();\r\n\r\n/**\r\n * Generic data type converter from firestore\r\n *\r\n * @template T\r\n */\r\nconst genericConverter = <T>() => ({\r\n    toFirestore: (inputData: T) => inputData,\r\n    fromFirestore: (snapshot: QueryDocumentSnapshot): T => snapshot.data() as T,\r\n});\r\n\r\n/**\r\n * Create a collection function, using typecasting and the withConverter function to get typed data back from firestore\r\n *\r\n * @template T\r\n * @param {string} collectionName\r\n * @return {*}  {CollectionReference<T>}\r\n */\r\nconst createCollection = <T = DocumentData>(collectionName: string): CollectionReference<T> => {\r\n    const converter = genericConverter<T>() as FirestoreDataConverter<T>;\r\n    return collection(db, collectionName).withConverter<T>(converter);\r\n};\r\n\r\n/**\r\n * Define the collections\r\n */\r\nexport const privateUserCollection = createCollection<PrivateUserData>('private-user-data');\r\nexport const publicUserCollection = createCollection<PublicUserData>('public-user-data');\r\n"],"mappings":"AAAA,SAASA,aAAa,QAAQ,cAAc;AAC5C,SAASC,cAAc,EAAEC,4BAA4B,QAAQ,eAAe;AAC5E,SAASC,yBAAyB,QAAQ,4BAA4B;AACtE,SACIC,UAAU,EAIVC,YAAY,QAET,oBAAoB;AAC3B,SAASC,UAAU,QAAQ,kBAAkB;AAC7C,OAAOC,YAAY,MAAM,2CAA2C;AAapE,IAAMC,cAAc,GAAG;EACnBC,MAAM,2CAAkB;EACxBC,UAAU,mCAAsB;EAChCC,SAAS,iBAAqB;EAC9BC,aAAa,6BAAyB;EACtCC,iBAAiB,gBAA8B;EAC/CC,KAAK,6CAAiB;EACtBC,aAAa;AACjB,CAAC;AAGD,OAAO,IAAMC,GAAG,GAAGhB,aAAa,CAACQ,cAAc,EAAE;EAAES,iCAAiC,EAAE;AAAK,CAAC,CAAC;AAM7F,OAAO,IAAMC,IAAI,GAAGjB,cAAc,CAACe,GAAG,EAAE;EACpCG,WAAW,EAAE,CAAChB,yBAAyB,CAACI,YAAY,CAAC,CAAC;EACtDa,qBAAqB,EAAElB;AAC3B,CAAC,CAAC;AAQF,OAAO,IAAMmB,EAAE,GAAGhB,YAAY,CAACW,GAAG,CAAC;AAKnC,OAAO,IAAMM,OAAO,GAAGhB,UAAU,EAAE;AAOnC,IAAMiB,gBAAgB,GAAG,SAAnBA,gBAAgB;EAAA,OAAa;IAC/BC,WAAW,EAAE,qBAACC,SAAY;MAAA,OAAKA,SAAS;IAAA;IACxCC,aAAa,EAAE,uBAACC,QAA+B;MAAA,OAAQA,QAAQ,CAACC,IAAI,EAAE;IAAA;EAC1E,CAAC;AAAA,CAAC;AASF,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAgB,CAAsBC,cAAsB,EAA6B;EAC3F,IAAMC,SAAS,GAAGR,gBAAgB,EAAkC;EACpE,OAAOnB,UAAU,CAACiB,EAAE,EAAES,cAAc,CAAC,CAACE,aAAa,CAAID,SAAS,CAAC;AACrE,CAAC;AAKD,OAAO,IAAME,qBAAqB,GAAGJ,gBAAgB,CAAkB,mBAAmB,CAAC;AAC3F,OAAO,IAAMK,oBAAoB,GAAGL,gBAAgB,CAAiB,kBAAkB,CAAC"},"metadata":{},"sourceType":"module"}